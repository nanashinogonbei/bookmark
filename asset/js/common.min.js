"use strict";var userManager=new Vue({data:{user_id:void 0,user_token:void 0},methods:{saveUser:function(e,t){this.user_id=e,this.user_token=t},cheakLocStor:function(){return!(!localStorage.getItem("user_id")||!localStorage.getItem("user_token"))}}}),addBookmark=new Vue({el:"#addBookmark",data:{show:!0},methods:{get_outpage_title:function(){var t=document.forms.addBookmark,e={url:t.url.value},a=axiosParamsGenerat(e);t.title.value="",e.url&&(t.title.classList.add("js-txt-loader"),t.title.classList.remove("form-txt--err"),axios({method:"POST",url:"./async/get_outpage_title.php",timeout:3e3,data:a}).then(function(e){t.title.classList.remove("js-txt-loader"),t.title.value=e.data,t.btn_exe.classList.remove("agree-btn--disabled"),t.btn_exe.classList.add("agree-btn--active"),t.btn_exe.disabled=!1}).catch(function(e){t.title.value="タイトルが取得できませんでした。",t.title.classList.remove("js-txt-loader"),t.title.classList.add("form-txt--err"),t.btn_exe.classList.add("agree-btn--disabled"),t.btn_exe.disabled=!1}))},add_exe:function(){userManager.cheakLocStor()?this.add_bookmark():console.log("ユーザー情報がありません。")},add_bookmark:function(){var t=this,a=document.forms.addBookmark,e={user_id:userManager.user_id,url:a.url.value,title:a.title.value,view:a.view.value},o=axiosParamsGenerat(e);axios({method:"POST",url:"./async/add_bookmark.php",timeout:3e3,data:o}).then(function(e){console.log(e.data),e.data&&(t.show=!1,setTimeout(function(){t.show=!0},3e3),a.btn_exe.classList.remove("agree-btn--active"),a.btn_exe.classList.add("agree-btn--disabled"),a.btn_exe.disabled=!0,bookmarkManager.get_bookmark())}).catch(function(e){console.log(e)})}}}),addCategory=new Vue({el:"#addCategory",data:{show:!0},methods:{input_moniter:function(e){var t=e.srcElement,a=document.forms.addCategory;0<t.value.length?(a.btn_exe.classList.remove("agree-btn--disabled"),a.btn_exe.classList.add("agree-btn--active"),a.btn_exe.disabled=!1):(a.btn_exe.classList.remove("agree-btn--active"),a.btn_exe.classList.add("agree-btn--disabled"),a.btn_exe.disabled=!0)},add_exe:function(){var t=this;if(userManager.cheakLocStor()){var a=document.forms.addCategory,e={user_id:userManager.user_id,category:a.category.value},o=axiosParamsGenerat(e);axios({method:"POST",url:"./async/add_category.php",timeout:3e3,data:o}).then(function(e){e.data&&(t.show=!1,setTimeout(function(){t.show=!0},3e3),a.btn_exe.classList.remove("agree-btn--active"),a.btn_exe.classList.add("agree-btn--disabled"),a.btn_exe.disabled=!0,a.category.value=""),bookmarkManager.get_category()}).catch(function(e){console.log(e)})}else console.log("idないっす")}}}),bookmarkManager=new Vue({el:"#bookmarkList",data:{view:!0,btn_label:"ブックマークを編集する",categorys:[],categorys_id:[],bookmarks:[]},methods:{get_category:function(t){var a=this,e={user_id:userManager.user_id},o=axiosParamsGenerat(e);axios({method:"POST",url:"./async/get_category.php",timeout:3e3,data:o}).then(function(e){e.data&&(a.categorys=e.data,a.categorys.unshift({category_id:0,label:"未分類"}),t&&t())}).catch(function(e){console.log("get_category: "+e)})},set_categorys_id:function(){for(var e=0;e<this.categorys.length;e++)this.categorys_id[e]=this.categorys[e].category_id},get_bookmark:function(){var t=this;this.set_categorys_id();document.forms.addBookmark;var e={user_id:userManager.user_id,category_id:this.categorys_id},a=axiosParamsGenerat(e);axios({method:"POST",url:"./async/get_bookmark.php",timeout:3e3,data:a}).then(function(e){t.print_bookmark(e.data)}).catch(function(e){console.log(e)})},print_bookmark:function(e){this.bookmarks=e},edit_and_save:function(){!0===this.view?(this.view=!1,this.btn_label="編集を保存する"):(this.view=!0,this.btn_label="ブックマークを編集する",bookmarkManager.save_bookmark())},save_bookmark:function(){for(var e=document.forms.bookmark.querySelectorAll("li"),t=[],a=[],o=[],r=0;r<e.length;r++){t=e[r].querySelectorAll(".lists input");for(var n=0;n<t.length;n++)a[n]=t[n].value;o[r]=a,a=[]}var s=axiosParamsGenerat(o);axios({method:"POST",url:"./async/update_bookmark.php",timeout:3e3,data:s}).then(function(e){console.log(e.data)}).catch(function(e){console.log(e)})},onUPDATE:function(e){console.log("update:"),console.log(e),orderChangeSort(e.srcElement)},onADD:function(e){orderChangeSort(e.target)},onREMOVE:function(e){orderChangeSort(e.from)},element_delete:function(e){e.target.closest("li").remove(),orderChangeSort(e.path[3])}}}),orderChangeSort=function(e){for(var t=e.dataset.category,a=e.childElementCount,o=0;o<a;o++)e.childNodes[o].children[2].children[1].value=t,e.childNodes[o].children[2].children[2].value=o},axiosParamsGenerat=function(e){var t=new URLSearchParams;for(var a in e)t.append(a,e[a]);return t},objectArraySort=function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"DESC",n=-1,s=1;return"ASC"===t&&(s=-(n=1)),e=e.sort(function(e,t){var a=e[r],o=t[r];return o<a?n:a<o?s:0})},orderBookmarks=function(e){if(0!==e.length)return _.orderBy(e,"order")};window.addEventListener("load",function(){!0===userManager.cheakLocStor()&&userManager.saveUser(localStorage.getItem("user_id"),localStorage.getItem("user_token")),bookmarkManager.get_category(function(){bookmarkManager.get_bookmark()})});
//# sourceMappingURL=common.min.js.map